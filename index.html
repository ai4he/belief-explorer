<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Belief Explorer</title>
  <style>
    /* Base styling */
    body {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background-color: #ffffff;
      color: #000000;
      line-height: 1.6;
    }
    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #121212;
        color: #ffffff;
      }
      .chat-container, .input-area, .footer {
        background-color: #1e1e1e;
      }
      textarea {
        background-color: #2c2c2c;
        color: #ffffff;
        border: 1px solid #444;
      }
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    .header h1 {
      margin: 0;
      font-size: 2.2em;
    }
    .header .description {
      font-style: italic;
      margin-top: 8px;
      color: #555;
    }
    /* Chat container */
    .chat-container {
      background: inherit;
      border: none;
      border-radius: 8px;
      padding: 15px;
      height: 500px;
      overflow-y: auto;
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 70%;
      word-wrap: break-word;
    }
    .assistant-message {
      background: #e0e0e0;
      color: #000;
      align-self: flex-start;
    }
    .user-message {
      background: #f5f5f5;
      color: #000;
      align-self: flex-end;
    }
    /* Input area */
    .input-area {
      background: inherit;
      border: none;
      border-radius: 8px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
      resize: none;
      box-sizing: border-box;
    }
    button {
      background-color: #000;
      color: #fff;
      font-size: 16px;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #333;
    }
    button:disabled {
      background-color: #888;
      cursor: not-allowed;
    }
    /* Spinner for "thinking" */
    .spinner {
      border: 4px solid rgba(0,0,0,0.1);
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border-left-color: #000;
      animation: spin 1s linear infinite;
      margin: 10px auto;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    /* Footer */
    .footer {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #ccc;
      font-size: 0.95em;
      text-align: center;
      color: #777;
      line-height: 1.4;
    }
    .footer p {
      margin: 8px 0;
    }
  </style>
</head>
<body>

  <div class="header">
    <h1>Belief Explorer</h1>
    <div class="description">Investigate your beliefs through meaningful AI dialogue.</div>
  </div>

  <div class="chat-container" id="chatContainer">
    <div class="message assistant-message">What belief or idea would you like to explore together?</div>
  </div>

  <div class="input-area">
    <textarea id="userInput" rows="3" placeholder="Share your thoughts..."></textarea>
    <button id="sendButton">Continue Dialogue</button>
    <div id="spinner" class="spinner" style="display: none;"></div>
  </div>

  <div class="footer">
    <p><strong>About Belief Explorer:</strong></p>
    <p>Human history is a story of beliefs – and the biases that cling to them. From political ideologies to personal convictions, we all see the world through subjective lenses shaped by upbringing, culture, and emotion. These biases influence what we accept as true, often overpowering facts and logical arguments. In the modern era, debates on social media or television often entrench opposing sides rather than resolve differences. As polarization grows, a provocative question arises: can artificial intelligence succeed where humans struggle?</p>
    <p>Our platform is designed to build the first unbiased repository of human beliefs—one that validates ideas based on factual alignment and observation rather than emotional bias. By helping individuals reflect on and critically examine their beliefs, we empower users to defend their ideas through evidence and reason.</p>
    <p>Credits: A joint project by the Metacognition Institute and HAIELAB from Clemson University.</p>
    <p>Contact: <a href="mailto:info@metacognitioninstitute.com">info@metacognitioninstitute.com</a></p>
  </div>

  <script>
    // Update API_URL to match your n8n webhook endpoint.
    const API_URL = 'https://gpu.haielab.org/webhook/deepseek-llama-demo';
    const chatContainer = document.getElementById('chatContainer');
    const userInput = document.getElementById('userInput');
    const sendButton = document.getElementById('sendButton');
    const spinner = document.getElementById('spinner');

    // Conversation history: initialize with the assistant's opening message.
    let conversationHistory = [
      { role: 'assistant', content: 'What belief or idea would you
